<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Build Augmented Anchor Matrix — build_augmented_anchor_matrix • hatsa</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Build Augmented Anchor Matrix — build_augmented_anchor_matrix"><meta name="description" content="Combines parcel anchors and projected task features into a single
  augmented anchor matrix for Procrustes alignment.
  If inputs have different numeric types (e.g. integer and double), the result
  is coerced per R's default rules (usually to the more general type)."><meta property="og:description" content="Combines parcel anchors and projected task features into a single
  augmented anchor matrix for Procrustes alignment.
  If inputs have different numeric types (e.g. integer and double), the result
  is coerced per R's default rules (usually to the more general type)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">hatsa</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/core-hatsa-toy-example.html">Core HATSA with a Toy-Connectome</a></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started with HATSA</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bbuchsbaum/hatsa/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Build Augmented Anchor Matrix</h1>
      <small class="dont-index">Source: <a href="https://github.com/bbuchsbaum/hatsa/blob/main/R/projection_helpers.R" class="external-link"><code>R/projection_helpers.R</code></a></small>
      <div class="d-none name"><code>build_augmented_anchor_matrix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Combines parcel anchors and projected task features into a single
  augmented anchor matrix for Procrustes alignment.
  If inputs have different numeric types (e.g. integer and double), the result
  is coerced per R's default rules (usually to the more general type).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build_augmented_anchor_matrix</span><span class="op">(</span><span class="va">A_parcel_anchors</span>, <span class="va">Z_task_features_projected</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-a-parcel-anchors">A_parcel_anchors<a class="anchor" aria-label="anchor" href="#arg-a-parcel-anchors"></a></dt>
<dd><p>A numeric matrix representing parcel anchors,
typically with dimensions `m_parcels x k_dims`.</p></dd>


<dt id="arg-z-task-features-projected">Z_task_features_projected<a class="anchor" aria-label="anchor" href="#arg-z-task-features-projected"></a></dt>
<dd><p>A numeric matrix representing projected task
features (e.g., condition means in the spectral space), typically with
dimensions `m_task_features x k_dims`. Can be `NULL` or have 0 rows if
no task features are to be added.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An augmented numeric matrix with dimensions
  `(m_parcels + m_task_features) x k_dims`.
  Row names are combined from inputs (made unique with `make.unique`).
  Column names are taken from `A_parcel_anchors` if it has them and rows;
  otherwise from `Z_task_features_projected`. An error is thrown if both have
  differing non-NULL column names.
  If `Z_task_features_projected` is `NULL` or has 0 rows, `A_parcel_anchors` is returned.
  If `A_parcel_anchors` has 0 rows and `Z_task_features_projected` is valid,
  `Z_task_features_projected` is returned.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">m_parcels</span> <span class="op">&lt;-</span> <span class="fl">5</span>; <span class="va">m_task</span> <span class="op">&lt;-</span> <span class="fl">3</span>; <span class="va">k_dims</span> <span class="op">&lt;-</span> <span class="fl">4</span></span></span>
<span class="r-in"><span><span class="va">A_p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">m_parcels</span><span class="op">*</span><span class="va">k_dims</span><span class="op">)</span>, <span class="va">m_parcels</span>, <span class="va">k_dims</span>, dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"p"</span>,<span class="fl">1</span><span class="op">:</span><span class="va">m_parcels</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"k"</span>,<span class="fl">1</span><span class="op">:</span><span class="va">k_dims</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Z_t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">m_task</span><span class="op">*</span><span class="va">k_dims</span><span class="op">)</span>, <span class="va">m_task</span>, <span class="va">k_dims</span>, dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"t"</span>,<span class="fl">1</span><span class="op">:</span><span class="va">m_task</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"k"</span>,<span class="fl">1</span><span class="op">:</span><span class="va">k_dims</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">A_aug</span> <span class="op">&lt;-</span> <span class="fu">build_augmented_anchor_matrix</span><span class="op">(</span><span class="va">A_p</span>, <span class="va">Z_t</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span><span class="op">(</span><span class="va">A_aug</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "p1" "p2" "p3" "p4" "p5" "t1" "t2" "t3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "k1" "k2" "k3" "k4"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Differing colnames should error</span></span></span>
<span class="r-in"><span><span class="va">Z_t_bad_colnames</span> <span class="op">&lt;-</span> <span class="va">Z_t</span>; <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">Z_t_bad_colnames</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"dim"</span>,<span class="fl">1</span><span class="op">:</span><span class="va">k_dims</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">build_augmented_anchor_matrix</span><span class="op">(</span><span class="va">A_p</span>, <span class="va">Z_t_bad_colnames</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error in build_augmented_anchor_matrix(A_p, Z_t_bad_colnames) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Column names/order differ between A_parcel_anchors and Z_task_features_projected; please align before binding.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brad Buchsbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

