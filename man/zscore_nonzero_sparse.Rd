% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{zscore_nonzero_sparse}
\alias{zscore_nonzero_sparse}
\title{Safe Z-scoring of non-zero values in a (potentially sparse) matrix}
\usage{
zscore_nonzero_sparse(x)
}
\arguments{
\item{x}{A numeric matrix (can be a base R matrix or a sparse `Matrix` object).
If sparse, it's assumed `x@x` holds the structurally non-zero values.}
}
\value{
A matrix of the same class and dimensions as `x`, with its non-zero
  elements z-scored.
}
\description{
Z-scores the non-zero elements of a matrix. If the standard deviation of these
non-zero values is 0 (e.g., all non-zero values are identical, or only one
non-zero value exists), these values are set to 0.
IMPORTANT: For symmetric matrices, ensure that only one triangle (and diagonal)
is stored in `x@x` (e.g., by `Matrix::forceSymmetric(x, uplo="U")` prior to calling)
to prevent breaking symmetry if `x@x` contained duplicates from both triangles.
}
\keyword{internal}
